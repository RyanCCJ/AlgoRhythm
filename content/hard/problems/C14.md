# 14. Design Twitter

## 題目
設計簡化版 Twitter,支援以下功能:
- postTweet(userId, tweetId):發布推文
- getNewsFeed(userId):取得最新 10 條推文(來自自己和追蹤的人,按時間倒序)
- follow(followerId, followeeId):追蹤使用者
- unfollow(followerId, followeeId):取消追蹤

## 面試重點
此題測試**物件導向設計 + 多路歸併**,是系統設計的入門題。

核心設計:
1. **User 類別**:
   - followees:追蹤的人集合
   - tweets:發布的推文串列(按時間)
2. **Tweet 類別**:
   - tweetId, userId, timestamp
3. **getNewsFeed 實作**:
   - 收集使用者和其追蹤者的所有推文串列
   - 用最小堆進行 k-way merge
   - 取前 10 個

面試官會重點觀察:
- 資料結構選擇:HashMap 存使用者,Set 存追蹤關係
- 時間戳的生成:全域計數器
- getNewsFeed 的效率:避免合併所有推文後再排序
- 堆的使用:多個已排序串列的合併
- 邊界處理:使用者不存在、自我追蹤、重複追蹤
- 擴展性思考:若推文量極大如何優化

**常考公司**:
- 社交媒體公司(Twitter、LinkedIn、Instagram)
- Google、Facebook/Meta
- 系統設計常見起手題
- OOD 與演算法的結合

此題展現了**如何將實際系統需求轉化為演算法問題**。

## 複雜度
- postTweet:O(1)
- follow/unfollow:O(1)
- getNewsFeed:O(N log K),N 為相關推文數,K 為使用者和追蹤者數量

## Follow-up
- 若要支援轉推(retweet),如何設計?
- 若要支援 hashtag 搜尋,資料結構如何調整?
- 若使用者數量極大,如何分散式儲存?
- 若要支援即時更新(推送),如何實作?